-- // === GUI ===
local screen_gui = Instance.new("ScreenGui");
screen_gui.Name = "Tokinu Hub";
screen_gui.ResetOnSpawn = false;
screen_gui.Parent = local_player:WaitForChild("PlayerGui");

local frame = Instance.new("Frame");
frame.Size = UDim2.new(0, 260, 0, 175);
frame.Position = UDim2.new(0, 40, 0, 60);
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0);
frame.BackgroundTransparency = 0.4;
frame.Active = true;
frame.Draggable = true;
frame.Parent = screen_gui;

local corner = Instance.new("UICorner");
corner.CornerRadius = UDim.new(0, 14);
corner.Parent = frame;

-- TITLE
local title = Instance.new("TextLabel");
title.Size = UDim2.new(1, -20, 0, 32);
title.Position = UDim2.new(0, 10, 0, 8);
title.BackgroundTransparency = 1;
title.Text = "Tokinu Hub";
title.TextColor3 = Color3.fromRGB(255, 255, 255);
title.Font = Enum.Font.GothamBold;
title.TextSize = 19;
title.TextXAlignment = Enum.TextXAlignment.Center;
title.Parent = frame;

-- BUTTON
local button = Instance.new("TextButton");
button.Size = UDim2.new(1, -30, 0, 70);
button.Position = UDim2.new(0, 15, 0.5, -45);
button.Text = "Fucking skids leaked it";
button.TextColor3 = Color3.fromRGB(255, 255, 255);
button.Font = Enum.Font.FredokaOne;
button.TextSize = 22;
button.BackgroundColor3 = Color3.fromRGB(0, 0, 0);
button.BackgroundTransparency = 0.3;
button.AutoButtonColor = false;
button.Parent = frame;

local button_corner = Instance.new("UICorner");
button_corner.CornerRadius = UDim.new(0, 12);
button_corner.Parent = button;

local button_gradient = Instance.new("UIGradient");
button_gradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 40)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(60, 60, 60))
});
button_gradient.Rotation = 90;
button_gradient.Parent = button;

-- INFO TEXT
local info_text = Instance.new("TextLabel");
info_text.Size = UDim2.new(1, -30, 0, 20);
info_text.Position = UDim2.new(0, 15, 0, 130);
info_text.BackgroundTransparency = 1;
info_text.Text = "discord.gg/brainrotworld";
info_text.TextColor3 = Color3.fromRGB(200, 200, 200);
info_text.Font = Enum.Font.Gotham;
info_text.TextSize = 13;
info_text.TextXAlignment = Enum.TextXAlignment.Center;
info_text.Parent = frame;

-- // === TOGGLE ===
local function toggle_lagger()
    lagger_enabled = not lagger_enabled

    if lagger_enabled then
        local equipped = equip_laser_gun()
        button.Text = equipped and "Fucking skids leaked it" or "Fucking skids leaked it"
        button_gradient.Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0, Color3.fromRGB(70, 0, 0)),
            ColorSequenceKeypoint.new(1, Color3.fromRGB(90, 20, 20))
        })
        info_text.Text = equipped and "Fucking skids leaked it" or "Fucking skids leaked it"
    else
        button.Text = "Fucking skids leaked it"
        button_gradient.Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 40)),
            ColorSequenceKeypoint.new(1, Color3.fromRGB(60, 60, 60))
        })
        info_text.Text = "Hold any tool to spam"
    end
end

-- // INPUT

-- // DRAGGABLE
local dragging = false
local drag_input, drag_start, start_pos
local drag_threshold = 6

local function update_input(input)
    local delta = input.Position - drag_start
    frame.Position = UDim2.new(
        start_pos.X.Scale, start_pos.X.Offset + delta.X,
        start_pos.Y.Scale, start_pos.Y.Offset + delta.Y
    )
end

frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        drag_start = input.Position
        start_pos = frame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)
